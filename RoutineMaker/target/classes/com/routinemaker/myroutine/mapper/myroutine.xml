<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="myroutine">
	
	<select id="profile" parameterType="String" resultType="com.routinemaker.myroutine.ProfileDTO">
		select * from tblMember where memberseq = #{seq}
	</select>
	
	<select id="routine" parameterType="String" resultType="com.routinemaker.myroutine.MyroutineDTO">
		select n.*, rownum as rnum from (select distinct name, theme, state, rest, time, alarm, repeat 
		from vwmyroutine where memberseq = #{seq} and startdate between '2021-08-31' and '2021-09-05' order by time asc) n
	</select>
	
	<select id="routinelist" parameterType="java.util.HashMap" resultType="com.routinemaker.myroutine.MyroutineDTO">
		select n.*, rownum as rnum from (select distinct name, theme, state, rest, time, alarm, repeat 
		from vwmyroutine where memberseq = #{seq} and startdate between #{sdate} and #{fdate} order by time asc) n
	</select>

</mapper>